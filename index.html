<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Device Verification</title>

<style>
body {
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:sans-serif;
    background:#0f172a;
    overflow:hidden;
}

.bubble {
    position:absolute;
    width:200px;
    height:200px;
    background:rgba(255,255,255,0.05);
    border-radius:50%;
    animation:float 12s infinite linear;
}

@keyframes float {
    from {transform:translateY(100vh);}
    to {transform:translateY(-200px);}
}

.card {
    padding:30px;
    border-radius:16px;
    text-align:center;
    color:white;
    width:280px;
    backdrop-filter:blur(10px);
    transition:0.4s;
}

.success { background:#16a34a; }
.fail { background:#dc2626; }

button {
    padding:10px 18px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    margin-top:12px;
    font-size:14px;
}
</style>
</head>

<body>

<div class="bubble" style="left:10%"></div>
<div class="bubble" style="left:70%;animation-delay:3s"></div>

<div id="card" class="card">
<h2 id="status">Verifying...</h2>
<p id="msg">Checking device security</p>
<button id="btn" style="display:none">Return to Bot</button>
<p style="font-size:12px;margin-top:10px">made by jenish</p>
</div>

<script>

const BOT = "TestingOnTop_bot";

// get token
const params = new URLSearchParams(location.search);
const token = params.get("token");

// device fingerprint
function deviceHash(){
    return btoa(
        navigator.userAgent +
        screen.width +
        screen.height +
        Intl.DateTimeFormat().resolvedOptions().timeZone
    );
}

const hash = deviceHash();

// local device lock
let used = localStorage.getItem("verified_device");

const card = document.getElementById("card");
const status = document.getElementById("status");
const msg = document.getElementById("msg");
const btn = document.getElementById("btn");

function success(){
    card.classList.add("success");
    status.innerText="Verification Successful";
    msg.innerText="Device secured ✔";

    localStorage.setItem("verified_device",hash);

    btn.style.display="block";
    btn.onclick=()=>{
        window.location.href=
        `https://t.me/${BOT}?start=verified_${token}`;
    };

    setTimeout(()=>{
        window.location.href=
        `https://t.me/${BOT}?start=verified_${token}`;
    },2000);
}

function fail(){
    card.classList.add("fail");
    status.innerText="Verification Failed";
    msg.innerText="Device already used ❌";

    btn.style.display="block";
    btn.onclick=()=>{
        window.location.href=`https://t.me/${BOT}`;
    };
}

// logic
setTimeout(()=>{
    if(!token){
        fail();
        return;
    }

    if(used && used===hash){
        fail();
        return;
    }

    success();

},1500);

</script>

</body>
</html>
