<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Secure Verification</title>

<style>

body{
margin:0;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
font-family:system-ui;
background:#0a0f2e;
color:white;
transition:background .5s;
}

.card{
width:90%;
max-width:380px;
padding:25px;
border-radius:18px;
text-align:center;
background:#14193f;
box-shadow:0 0 30px rgba(0,120,255,.3);
transition:.4s;
}

.scan{
width:120px;
height:120px;
border-radius:50%;
border:3px solid #4ea1ff;
margin:20px auto;
animation:spin 1.2s linear infinite;
}

@keyframes spin{
to{transform:rotate(360deg)}
}

.bar{
width:100%;
height:8px;
background:#1b204f;
border-radius:10px;
overflow:hidden;
}

.progress{
height:100%;
width:0%;
background:#4ea1ff;
transition:.2s;
}

.success{
background:#0c3d1f !important;
}

.fail{
background:#3d0c0c !important;
}

.success .card{
background:#14532d;
box-shadow:0 0 25px rgba(0,255,120,.6);
}

.fail .card{
background:#5b1b1b;
box-shadow:0 0 25px rgba(255,0,0,.6);
}

button{
margin-top:20px;
width:100%;
padding:14px;
border:none;
border-radius:12px;
background:#4ea1ff;
color:white;
font-size:16px;
cursor:pointer;
}

</style>
</head>

<body>

<div class="card">

<h2>Device Verification</h2>

<div id="scan" class="scan"></div>

<p id="status">Scanning device security…</p>

<div class="bar">
<div id="prog" class="progress"></div>
</div>

<button onclick="goBot()">⬅ Return to Bot</button>

</div>

<script>

// ===== DEVICE HASH =====

function hash(str){
let h=0;
for(let i=0;i<str.length;i++){
h=((h<<5)-h)+str.charCodeAt(i);
h|=0;
}
return Math.abs(h).toString();
}

let fingerprint =
navigator.userAgent +
screen.width +
screen.height +
navigator.language;

let deviceHash = hash(fingerprint);

// stored device
let storedHash = localStorage.getItem("verified_device");

// UI refs
let p=0;
let prog=document.getElementById("prog");
let status=document.getElementById("status");
let scan=document.getElementById("scan");

// redirect
function goBot(){
window.location.href =
"https://t.me/TestingOnTop_bot?start=verify_"+deviceHash;
}

// ===== PROGRESS =====

let timer=setInterval(()=>{

p+=3;
prog.style.width=p+"%";

if(p>=100){

clearInterval(timer);

let mismatch = false;

// only mismatch if stored exists AND different
if(storedHash && storedHash !== deviceHash){
mismatch = true;
}

// ===== FAIL =====
if(mismatch){

document.body.classList.add("fail");
status.innerText="❌ Device mismatch detected";

scan.style.display="none";

setTimeout(goBot,1500);
return;
}

// ===== SUCCESS =====

localStorage.setItem("verified_device", deviceHash);

document.body.classList.add("success");
status.innerText="✅ Verification successful — redirecting";

scan.style.display="none";

setTimeout(goBot,1200);

}

},60);

</script>

</body>
</html>
